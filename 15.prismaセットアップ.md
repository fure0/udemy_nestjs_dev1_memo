## 1 install prisma

```
npm i prisma
```

## 2 init prisma

```
npx prisma init
```

## 3 .env 記述

- DB情報入力

```
DATABASE_URL="postgresql://nestjsuser:nestjspass@localhost:5432/fleamarket?schema=public"
```

## 4 migration実施

- schema.prismaに スキーマ定義

## 5 migration実施

```
npx prisma migrate dev --name init
```

## 6 prisma studio

```
npx prisma studio
```

##  prisma client install
```
npm i @prisma/client
```

## prisma module 登録

```
nest g module prisma
```

## prisma service 登録

```
nest g service prisma --no-spec
```

## src/prisma/prisma.service.ts
```typescript
import { Injectable, OnModuleInit } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit {
  async onModuleInit() {
    await this.$connect();
  }
}
```

## src/prisma/prisma.module.ts
```typescript
import { Module } from '@nestjs/common';
import { PrismaService } from './prisma.service';

@Module({
  providers: [PrismaService],
  exports: [PrismaService],
})
export class PrismaModule {}
```